(function(a,h){function f(c,d){var b=c.nodeName.toLowerCase();if("area"===b){var b=c.parentNode,g=b.name;if(!c.href||!g||"map"!==b.nodeName.toLowerCase())return!1;b=a("img[usemap=#"+g+"]")[0];return!!b&&e(b)}return(/input|select|textarea|button|object/.test(b)?!c.disabled:"a"==b?c.href||d:d)&&e(c)}function e(c){return!a(c).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(c,d){return"number"===typeof c?this.each(function(){var b=
this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;c=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?a(document):c},zIndex:function(c){if(c!==h)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":
"mousedown")+".v-ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".v-ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function b(b,c,d,e){a.each(g,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0;d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0);e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var g="Width"===d?["Left","Right"]:["Top","Bottom"],e=d.toLowerCase(),f={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,
outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===h?f["inner"+d].call(this):this.each(function(){a(this).css(e,b(this,c)+"px")})};a.fn["outer"+d]=function(c,g){return"number"!==typeof c?f["outer"+d].call(this,c):this.each(function(){a(this).css(e,b(this,c,!0,g)+"px")})}}),a.extend(a.expr[":"],{data:function(c,d,b){return!!a.data(c,b[3])},focusable:function(c){return f(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),b=isNaN(d);
return(b||0<=d)&&f(c,!b)}}),a(function(){var c=document.body,d=c.appendChild(d=document.createElement("div"));a.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===d.offsetHeight;a.support.selectstart="onselectstart"in d;c.removeChild(d).style.display="none"}),a.extend(a.ui,{plugin:{add:function(c,d,b){c=a.ui[c].prototype;for(var g in b)c.plugins[g]=c.plugins[g]||[],c.plugins[g].push([d,b[g]])},call:function(a,d,b){if((d=a.plugins[d])&&a.element[0].parentNode)for(var g=
0;g<d.length;g++)a.options[d[g][0]]&&d[g][1].apply(a.element,b)}},contains:function(a,d){return document.compareDocumentPosition?a.compareDocumentPosition(d)&16:a!==d&&a.contains(d)},hasScroll:function(c,d){if("hidden"===a(c).css("overflow"))return!1;var b=d&&"left"===d?"scrollLeft":"scrollTop",g=!1;if(0<c[b])return!0;c[b]=1;g=0<c[b];c[b]=0;return g},isOverAxis:function(a,d,b){return a>d&&a<d+b},isOver:function(c,d,b,g,e,f){return a.ui.isOverAxis(c,b,e)&&a.ui.isOverAxis(d,g,f)}}))})(vitruvian.jQuery);(function(a,h){if(a.cleanData){var f=a.cleanData;a.cleanData=function(c){for(var d=0,b;null!=(b=c[d]);d++)try{a(b).triggerHandler("remove")}catch(g){}f(c)}}else{var e=a.fn.remove;a.fn.remove=function(c,d){return this.each(function(){d||c&&!a.filter(c,[this]).length||a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return e.call(a(this),c,d)})}}a.widget=function(c,d,b){var g=c.split(".")[0],e;c=c.split(".")[1];e=g+"-"+c;b||(b=d,d=a.Widget);a.expr[":"][e]=function(b){return!!a.data(b,
c)};a[g]=a[g]||{};a[g][c]=function(a,b){arguments.length&&this._createWidget(a,b)};d=new d;d.options=a.extend(!0,{},d.options);a[g][c].prototype=a.extend(!0,d,{namespace:g,widgetName:c,widgetEventPrefix:a[g][c].prototype.widgetEventPrefix||c,widgetBaseClass:e},b);a.widget.bridge(c,a[g][c])};a.widget.bridge=function(c,d){a.fn[c]=function(b){var g="string"===typeof b,e=Array.prototype.slice.call(arguments,1),f=this;b=!g&&e.length?a.extend.apply(null,[!0,b].concat(e)):b;if(g&&"_"===b.charAt(0))return f;
g?this.each(function(){var d=a.data(this,c),g=d&&a.isFunction(d[b])?d[b].apply(d,e):d;if(g!==d&&g!==h)return f=g,!1}):this.each(function(){var g=a.data(this,c);g?g.option(b||{})._init():a.data(this,c,new d(b,this))});return f}};a.Widget=function(a,d){arguments.length&&this._createWidget(a,d)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(c,d){a.data(d,this.widgetName,this);this.element=a(d);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),
c);var b=this;this.element.bind("remove."+this.widgetName,function(){b.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled v-ui-state-disabled")},widget:function(){return this.element},
option:function(c,d){var b=c;if(0===arguments.length)return a.extend({},this.options);if("string"===typeof c){if(d===h)return this.options[c];b={};b[c]=d}this._setOptions(b);return this},_setOptions:function(c){var d=this;a.each(c,function(a,c){d._setOption(a,c)});return this},_setOption:function(a,d){this.options[a]=d;"disabled"===a&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled v-ui-state-disabled").attr("aria-disabled",d);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(c,d,b){var g,e=this.options[c];b=b||{};d=a.Event(d);d.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();d.target=this.element[0];if(c=d.originalEvent)for(g in c)g in d||(d[g]=c[g]);this.element.trigger(d,b);return!(a.isFunction(e)&&!1===e.call(this.element[0],d,b)||d.isDefaultPrevented())}}})(vitruvian.jQuery);(function(a,h){var f=!1;a(document).mouseup(function(a){f=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(a){return e._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,e.widgetName+".preventClickEvent"))return a.removeData(c.target,e.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(e){if(!f){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var c=this,d=1==e.which,b="string"==typeof this.options.cancel&&e.target.nodeName?a(e.target).closest(this.options.cancel).length:!1;if(!d||b||!this._mouseCapture(e))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=
!1!==this._mouseStart(e),!this._mouseStarted))return e.preventDefault(),!0;!0===a.data(e.target,this.widgetName+".preventClickEvent")&&a.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return f=!0}},_mouseMove:function(e){if(a.browser.msie&&
!(9<=document.documentMode||e.button))return this._mouseUp(e);if(this._mouseStarted)return this._mouseDrag(e),e.preventDefault();this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e))?this._mouseDrag(e):this._mouseUp(e));return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=
!1,e.target==this._mouseDownEvent.target&&a.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(vitruvian.jQuery);(function(a,h){a.ui=a.ui||{};var f=/left|center|right/,e=/top|center|bottom/,c={},d=a.fn.position,b=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return d.apply(this,arguments);b=a.extend({},b);var l=a(b.of),k=l[0],p=(b.collision||"flip").split(" "),m=b.offset?b.offset.split(" "):[0,0],n,r,q;9===k.nodeType?(n=l.width(),r=l.height(),q={top:0,left:0}):k.setTimeout?(n=l.width(),r=l.height(),q={top:l.scrollTop(),left:l.scrollLeft()}):k.preventDefault?(b.at="left top",n=r=0,q={top:b.of.pageY,left:b.of.pageX}):
(n=l.outerWidth(),r=l.outerHeight(),q=l.offset());a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=f.test(a[0])?a.concat(["center"]):e.test(a[0])?["center"].concat(a):["center","center"]);a[0]=f.test(a[0])?a[0]:"center";a[1]=e.test(a[1])?a[1]:"center";b[this]=a});1===p.length&&(p[1]=p[0]);m[0]=parseInt(m[0],10)||0;1===m.length&&(m[1]=m[0]);m[1]=parseInt(m[1],10)||0;"right"===b.at[0]?q.left+=n:"center"===b.at[0]&&(q.left+=n/2);"bottom"===b.at[1]?q.top+=r:"center"===b.at[1]&&
(q.top+=r/2);q.left+=m[0];q.top+=m[1];return this.each(function(){var d=a(this),e=d.outerWidth(),l=d.outerHeight(),f=parseInt(a.curCSS(this,"marginLeft",!0))||0,k=parseInt(a.curCSS(this,"marginTop",!0))||0,h=e+f+(parseInt(a.curCSS(this,"marginRight",!0))||0),A=l+k+(parseInt(a.curCSS(this,"marginBottom",!0))||0),u=a.extend({},q),z;"right"===b.my[0]?u.left-=e:"center"===b.my[0]&&(u.left-=e/2);"bottom"===b.my[1]?u.top-=l:"center"===b.my[1]&&(u.top-=l/2);c.fractions||(u.left=Math.round(u.left),u.top=
Math.round(u.top));z={left:u.left-f,top:u.top-k};a.each(["left","top"],function(c,d){if(a.ui.position[p[c]])a.ui.position[p[c]][d](u,{targetWidth:n,targetHeight:r,elemWidth:e,elemHeight:l,collisionPosition:z,collisionWidth:h,collisionHeight:A,offset:m,my:b.my,at:b.at})});a.fn.bgiframe&&d.bgiframe();d.offset(a.extend(u,{using:b.using}))})};a.ui.position={fit:{left:function(b,c){var d=a(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-
c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if("center"!==c.at[0]){var d=a(window),d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),e="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,f="left"===c.at[0]?c.targetWidth:-c.targetWidth,n=-2*c.offset[0];b.left+=0>c.collisionPosition.left?e+
f+n:0<d?e+f+n:0}},top:function(b,c){if("center"!==c.at[1]){var d=a(window),d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),e="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,f="top"===c.at[1]?c.targetHeight:-c.targetHeight,n=-2*c.offset[1];b.top+=0>c.collisionPosition.top?e+f+n:0<d?e+f+n:0}}}};a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",
!0),10)||0,n=parseInt(a.curCSS(b,"left",!0),10)||0,e={top:c.top-e.top+f,left:c.left-e.left+n};"using"in c?c.using.call(b,e):d.css(e)},a.fn.offset=function(c){var d=this[0];return d&&d.ownerDocument?c?this.each(function(){a.offset.setOffset(this,c)}):b.call(this):null});(function(){var b=document.getElementsByTagName("body")[0],d=document.createElement("div"),e,f;e=document.createElement(b?"div":"body");f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};b&&a.extend(f,{position:"absolute",
left:"-1000px",top:"-1000px"});for(var m in f)e.style[m]=f[m];e.appendChild(d);f=b||document.documentElement;f.insertBefore(e,f.firstChild);d.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";d=a(d).offset(function(a,b){return b}).offset();e.innerHTML="";f.removeChild(e);b=d.top+d.left+(b?2E3:0);c.fractions=21<b&&22>b})()})(vitruvian.jQuery);(function(a,h){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("v-ui-draggable");this.options.disabled&&this.element.addClass("v-ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("v-ui-draggable v-ui-draggable-dragging v-ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(f){var e=this.options;if(this.helper||e.disabled||a(f.target).is(".v-ui-resizable-handle"))return!1;
this.handle=this._getHandle(f);if(!this.handle)return!1;e.iframeFix&&a(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){a('<div class="v-ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(f){var e=this.options;this.helper=this._createHelper(f);this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=
this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(f);this.originalPageX=f.pageX;
this.originalPageY=f.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(!1===this._trigger("start",f))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,f);this.helper.addClass("v-ui-draggable-dragging");this._mouseDrag(f,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,f);return!0},_mouseDrag:function(f,e){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");
if(!e){var c=this._uiHash();if(!1===this._trigger("drag",f,c))return this._mouseUp({}),!1;this.position=c.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,f);return!1},_mouseStop:function(f){var e=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(e=a.ui.ddmanager.drop(this,f));this.dropped&&(e=this.dropped,this.dropped=
!1);if(!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!e||"valid"==this.options.revert&&e||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var c=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",f)&&c._clear()})}else!1!==this._trigger("stop",f)&&this._clear();return!1},_mouseUp:function(f){!0===
this.options.iframeFix&&a("div.v-ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,f);return a.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){this.helper.is(".v-ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(f){var e=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==f.target&&
(e=!0)});return e},_createHelper:function(f){var e=this.options;f=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[f])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element;f.parents("body").length||f.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo);f[0]==this.element[0]||/(fixed|absolute)/.test(f.css("position"))||f.css("position","absolute");return f},_adjustOffsetFromHelper:function(f){"string"==typeof f&&(f=f.split(" "));a.isArray(f)&&(f={left:+f[0],
top:+f[1]||0});"left"in f&&(this.offset.click.left=f.left+this.margins.left);"right"in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left);"top"in f&&(this.offset.click.top=f.top+this.margins.top);"bottom"in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)f={top:0,left:0};return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;"parent"==f.containment&&(f.containment=this.helper[0].parentNode);if("document"==f.containment||"window"==f.containment)this.containment=["document"==f.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==f.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==f.containment?0:a(window).scrollLeft())+a("document"==f.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==f.containment?0:a(window).scrollTop())+(a("document"==f.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(f.containment)||f.containment.constructor==Array)f.containment.constructor==Array&&(this.containment=f.containment);else{var f=a(f.containment),e=f[0];if(e){f.offset();var c="hidden"!=a(e).css("overflow");this.containment=
[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(c?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=f}}},_convertPositionTo:function(f,e){e||(e=this.position);var c="absolute"==f?1:-1,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,b=/(html|body)/i.test(d[0].tagName);return{top:e.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():b?0:d.scrollTop())*c),left:e.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():b?0:d.scrollLeft())*c)}},_generatePosition:function(f){var e=this.options,c="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,
d=/(html|body)/i.test(c[0].tagName),b=f.pageX,g=f.pageY;if(this.originalPosition){var l;this.containment&&(this.relative_container?(l=this.relative_container.offset(),l=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]):l=this.containment,f.pageX-this.offset.click.left<l[0]&&(b=l[0]+this.offset.click.left),f.pageY-this.offset.click.top<l[1]&&(g=l[1]+this.offset.click.top),f.pageX-this.offset.click.left>l[2]&&(b=l[2]+this.offset.click.left),
f.pageY-this.offset.click.top>l[3]&&(g=l[3]+this.offset.click.top));e.grid&&(g=e.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,g=l?g-this.offset.click.top<l[1]||g-this.offset.click.top>l[3]?g-this.offset.click.top<l[1]?g+e.grid[1]:g-e.grid[1]:g:g,b=e.grid[0]?this.originalPageX+Math.round((b-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,b=l?b-this.offset.click.left<l[0]||b-this.offset.click.left>l[2]?b-this.offset.click.left<l[0]?
b+e.grid[0]:b-e.grid[0]:b:b)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():d?0:c.scrollTop()),left:b-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():d?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("v-ui-draggable-dragging");
this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(f,e,c){c=c||this._uiHash();a.ui.plugin.call(this,f,[e,c]);"drag"==f&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,f,e,c)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.18"});
a.ui.plugin.add("draggable","connectToSortable",{start:function(f,e){var c=a(this).data("draggable"),d=c.options,b=a.extend({},e,{item:c.element});c.sortables=[];a(d.connectToSortable).each(function(){var d=a.data(this,"sortable");d&&!d.options.disabled&&(c.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",f,b))})},stop:function(f,e){var c=a(this).data("draggable"),d=a.extend({},e,{item:c.element});a.each(c.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(f),this.instance.options.helper=this.instance.options._helper,"original"==c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",f,d))})},drag:function(f,e){var c=a(this).data("draggable"),d=this;a.each(c.sortables,function(b){this.instance.positionAbs=
c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(d).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},f.target=this.instance.currentItem[0],this.instance._mouseCapture(f,
!0),this.instance._mouseStart(f,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",f),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(f)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",f,this.instance._uiHash(this.instance)),this.instance._mouseStop(f,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",f),c.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(f,e){var c=a("body"),d=a(this).data("draggable").options;
c.css("cursor")&&(d._cursor=c.css("cursor"));c.css("cursor",d.cursor)},stop:function(f,e){var c=a(this).data("draggable").options;c._cursor&&a("body").css("cursor",c._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(f,e){var c=a(e.helper),d=a(this).data("draggable").options;c.css("opacity")&&(d._opacity=c.css("opacity"));c.css("opacity",d.opacity)},stop:function(f,e){var c=a(this).data("draggable").options;c._opacity&&a(e.helper).css("opacity",c._opacity)}});a.ui.plugin.add("draggable",
"scroll",{start:function(f,e){var c=a(this).data("draggable");c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(f,e){var c=a(this).data("draggable"),d=c.options,b=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-f.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop+d.scrollSpeed:f.pageY-c.overflowOffset.top<
d.scrollSensitivity&&(c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-f.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft+d.scrollSpeed:f.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(f.pageY-a(document).scrollTop()<d.scrollSensitivity?b=a(document).scrollTop(a(document).scrollTop()-
d.scrollSpeed):a(window).height()-(f.pageY-a(document).scrollTop())<d.scrollSensitivity&&(b=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(f.pageX-a(document).scrollLeft()<d.scrollSensitivity?b=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(f.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(b=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed))));!1!==b&&(a.ui.ddmanager&&!d.dropBehaviour)&&a.ui.ddmanager.prepareOffsets(c,
f)}});a.ui.plugin.add("draggable","snap",{start:function(f,e){var c=a(this).data("draggable"),d=c.options;c.snapElements=[];a(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var b=a(this),d=b.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:d.top,left:d.left})})},drag:function(f,e){for(var c=a(this).data("draggable"),d=c.options,b=d.snapTolerance,g=e.offset.left,l=g+c.helperProportions.width,k=e.offset.top,
p=k+c.helperProportions.height,m=c.snapElements.length-1;0<=m;m--){var n=c.snapElements[m].left,r=n+c.snapElements[m].width,q=c.snapElements[m].top,s=q+c.snapElements[m].height;if(n-b<g&&g<r+b&&q-b<k&&k<s+b||n-b<g&&g<r+b&&q-b<p&&p<s+b||n-b<l&&l<r+b&&q-b<k&&k<s+b||n-b<l&&l<r+b&&q-b<p&&p<s+b){if("inner"!=d.snapMode){var v=Math.abs(q-p)<=b,h=Math.abs(s-k)<=b,w=Math.abs(n-l)<=b,x=Math.abs(r-g)<=b;v&&(e.position.top=c._convertPositionTo("relative",{top:q-c.helperProportions.height,left:0}).top-c.margins.top);
h&&(e.position.top=c._convertPositionTo("relative",{top:s,left:0}).top-c.margins.top);w&&(e.position.left=c._convertPositionTo("relative",{top:0,left:n-c.helperProportions.width}).left-c.margins.left);x&&(e.position.left=c._convertPositionTo("relative",{top:0,left:r}).left-c.margins.left)}var y=v||h||w||x;"outer"!=d.snapMode&&(v=Math.abs(q-k)<=b,h=Math.abs(s-p)<=b,w=Math.abs(n-g)<=b,x=Math.abs(r-l)<=b,v&&(e.position.top=c._convertPositionTo("relative",{top:q,left:0}).top-c.margins.top),h&&(e.position.top=
c._convertPositionTo("relative",{top:s-c.helperProportions.height,left:0}).top-c.margins.top),w&&(e.position.left=c._convertPositionTo("relative",{top:0,left:n}).left-c.margins.left),x&&(e.position.left=c._convertPositionTo("relative",{top:0,left:r-c.helperProportions.width}).left-c.margins.left));!c.snapElements[m].snapping&&(v||h||w||x||y)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,f,a.extend(c._uiHash(),{snapItem:c.snapElements[m].item}));c.snapElements[m].snapping=v||h||w||x||y}else c.snapElements[m].snapping&&
c.options.snap.release&&c.options.snap.release.call(c.element,f,a.extend(c._uiHash(),{snapItem:c.snapElements[m].item})),c.snapElements[m].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(f,e){var c=a(this).data("draggable").options,c=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a});this[0].style.zIndex=d+c.length}}});
a.ui.plugin.add("draggable","zIndex",{start:function(f,e){var c=a(e.helper),d=a(this).data("draggable").options;c.css("zIndex")&&(d._zIndex=c.css("zIndex"));c.css("zIndex",d.zIndex)},stop:function(f,e){var c=a(this).data("draggable").options;c._zIndex&&a(e.helper).css("zIndex",c._zIndex)}})})(vitruvian.jQuery);(function(a,h){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var c=this,d=this.options;this.element.addClass("v-ui-resizable");a.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:d.helper||d.ghost||d.animate?d.helper||"v-ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="v-ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=d.handles||(a(".v-ui-resizable-handle",this.element).length?{n:".v-ui-resizable-n",e:".v-ui-resizable-e",s:".v-ui-resizable-s",w:".v-ui-resizable-w",se:".v-ui-resizable-se",sw:".v-ui-resizable-sw",ne:".v-ui-resizable-ne",nw:".v-ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var b=this.handles.split(",");
this.handles={};for(var e=0;e<b.length;e++){var f=a.trim(b[e]),k=a('<div class="v-ui-resizable-handle v-ui-resizable-'+f+'"></div>');/sw|se|ne|nw/.test(f)&&k.css({zIndex:++d.zIndex});"se"==f&&k.addClass("v-ui-icon v-ui-icon-gripsmall-diagonal-se");this.handles[f]=".v-ui-resizable-"+f;this.element.append(k)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&
this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(d,e);this._proportionallyResize()}a(this.handles[c])}};this._renderAxis(this.element);this._handles=a(".v-ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!c.resizing){if(this.className)var a=
this.className.match(/v-ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);c.axis=a&&a[1]?a[1]:"se"}});d.autoHide&&(this._handles.hide(),a(this.element).addClass("v-ui-resizable-autohide").hover(function(){d.disabled||(a(this).removeClass("v-ui-resizable-autohide"),c._handles.show())},function(){d.disabled||c.resizing||(a(this).addClass("v-ui-resizable-autohide"),c._handles.hide())}));this._mouseInit()},destroy:function(){this._mouseDestroy();var c=function(b){a(b).removeClass("v-ui-resizable v-ui-resizable-disabled v-ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".v-ui-resizable-handle").remove()};
if(this.elementIsWrapper){c(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);c(this.originalElement);return this},_mouseCapture:function(c){var d=!1,b;for(b in this.handles)a(this.handles[b])[0]==c.target&&(d=!0);return!this.options.disabled&&d},_mouseStart:function(c){var d=this.options,b=this.element.position(),
e=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(e.is(".v-ui-draggable")||/absolute/.test(e.css("position")))&&e.css({position:"absolute",top:b.top,left:b.left});this._renderProxy();var b=f(this.helper.css("left")),l=f(this.helper.css("top"));d.containment&&(b+=a(d.containment).scrollLeft()||0,l+=a(d.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:b,top:l};this.size=this._helper?{width:e.outerWidth(),
height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:b,top:l};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;d=a(".v-ui-resizable-"+this.axis).css("cursor");
a("body").css("cursor","auto"==d?this.axis+"-resize":d);e.addClass("v-ui-resizable-resizing");this._propagate("start",c);return!0},_mouseDrag:function(a){var d=this.helper,b=this.originalMousePosition,e=this._change[this.axis];if(!e)return!1;b=e.apply(this,[a,a.pageX-b.left||0,a.pageY-b.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)b=this._updateRatio(b,a);b=this._respectSize(b,a);this._propagate("resize",a);d.css({top:this.position.top+"px",left:this.position.left+
"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(b);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(c){this.resizing=!1;var d=this.options;if(this._helper){var b=this._proportionallyResizeElements,e=b.length&&/textarea/i.test(b[0].nodeName),b=e&&a.ui.hasScroll(b[0],"left")?0:this.sizeDiff.height,e=e?0:this.sizeDiff.width,e={width:this.helper.width()-e,height:this.helper.height()-
b},b=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(a.extend(e,{top:f,left:b}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!d.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("v-ui-resizable-resizing");this._propagate("stop",c);this._helper&&this.helper.remove();
return!1},_updateVirtualBoundaries:function(a){var d=this.options,b,g,f,d={minWidth:e(d.minWidth)?d.minWidth:0,maxWidth:e(d.maxWidth)?d.maxWidth:Infinity,minHeight:e(d.minHeight)?d.minHeight:0,maxHeight:e(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||a)a=d.minHeight*this.aspectRatio,g=d.minWidth/this.aspectRatio,b=d.maxHeight*this.aspectRatio,f=d.maxWidth/this.aspectRatio,a>d.minWidth&&(d.minWidth=a),g>d.minHeight&&(d.minHeight=g),b<d.maxWidth&&(d.maxWidth=b),f<d.maxHeight&&(d.maxHeight=
f);this._vBoundaries=d},_updateCache:function(a){this.offset=this.helper.offset();e(a.left)&&(this.position.left=a.left);e(a.top)&&(this.position.top=a.top);e(a.height)&&(this.size.height=a.height);e(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,d){var b=this.position,g=this.size,f=this.axis;e(a.height)?a.width=a.height*this.aspectRatio:e(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==f&&(a.left=b.left+(g.width-a.width),a.top=null);"nw"==f&&(a.top=b.top+(g.height-a.height),a.left=
b.left+(g.width-a.width));return a},_respectSize:function(a,d){var b=this._vBoundaries,g=this.axis,f=e(a.width)&&b.maxWidth&&b.maxWidth<a.width,k=e(a.height)&&b.maxHeight&&b.maxHeight<a.height,p=e(a.width)&&b.minWidth&&b.minWidth>a.width,m=e(a.height)&&b.minHeight&&b.minHeight>a.height;p&&(a.width=b.minWidth);m&&(a.height=b.minHeight);f&&(a.width=b.maxWidth);k&&(a.height=b.maxHeight);var n=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,q=/sw|nw|w/.test(g),
g=/nw|ne|n/.test(g);p&&q&&(a.left=n-b.minWidth);f&&q&&(a.left=n-b.maxWidth);m&&g&&(a.top=r-b.minHeight);k&&g&&(a.top=r-b.maxHeight);(b=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:b&&(!a.top&&a.left)&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var b=this._proportionallyResizeElements[d];if(!this.borderDif){var e=[b.css("borderTopWidth"),b.css("borderRightWidth"),
b.css("borderBottomWidth"),b.css("borderLeftWidth")],f=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var d=parseInt(a,10)||0,c=parseInt(f[b],10)||0;return d+c})}a.browser.msie&&(a(c).is(":hidden")||a(c).parents(":hidden").length)||b.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var c=this.options;this.elementOffset=this.element.offset();
if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&7>a.browser.version,b=d?1:0,d=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-b+"px",top:this.elementOffset.top-b+"px",zIndex:++c.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,d,b){return{width:this.originalSize.width+
d}},w:function(a,d,b){return{left:this.originalPosition.left+d,width:this.originalSize.width-d}},n:function(a,d,b){return{top:this.originalPosition.top+b,height:this.originalSize.height-b}},s:function(a,d,b){return{height:this.originalSize.height+b}},se:function(c,d,b){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[c,d,b]))},sw:function(c,d,b){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[c,d,b]))},ne:function(c,d,b){return a.extend(this._change.n.apply(this,
arguments),this._change.e.apply(this,[c,d,b]))},nw:function(c,d,b){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[c,d,b]))}},_propagate:function(c,d){a.ui.plugin.call(this,c,[d,this.ui()]);"resize"!=c&&this._trigger(c,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,
{version:"1.8.18"});a.ui.plugin.add("resizable","alsoResize",{start:function(c,d){var b=a(this).data("resizable").options,e=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof b.alsoResize||b.alsoResize.parentNode?e(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],e(b.alsoResize)):a.each(b.alsoResize,function(a){e(a)})},
resize:function(c,d){var b=a(this).data("resizable"),e=b.options,f=b.originalSize,k=b.originalPosition,p={height:b.size.height-f.height||0,width:b.size.width-f.width||0,top:b.position.top-k.top||0,left:b.position.left-k.left||0},m=function(b,c){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),n={},f=c&&c.length?c:b.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var d=(e[b]||0)+(p[b]||0);d&&0<=d&&(n[b]=d||null)});
b.css(n)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?m(e.alsoResize):a.each(e.alsoResize,function(a,b){m(a,b)})},stop:function(c,d){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(c,d){var b=a(this).data("resizable"),e=b.options,f=b._proportionallyResizeElements,k=f.length&&/textarea/i.test(f[0].nodeName),p=k&&a.ui.hasScroll(f[0],"left")?0:b.sizeDiff.height,k={width:b.size.width-(k?0:b.sizeDiff.width),height:b.size.height-p},p=parseInt(b.element.css("left"),
10)+(b.position.left-b.originalPosition.left)||null,m=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(a.extend(k,m&&p?{top:m,left:p}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var d={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:d.width,height:d.height});b._updateCache(d);
b._propagate("resize",c)}})}});a.ui.plugin.add("resizable","containment",{start:function(c,d){var b=a(this).data("resizable"),e=b.element,l=b.options.containment;if(e=l instanceof a?l.get(0):/parent/.test(l)?e.parent().get(0):l)if(b.containerElement=a(e),/document/.test(l)||l==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var k=
a(e),p=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){p[a]=f(k.css("padding"+b))});b.containerOffset=k.offset();b.containerPosition=k.position();b.containerSize={height:k.innerHeight()-p[3],width:k.innerWidth()-p[1]};var l=b.containerOffset,m=b.containerSize.height,n=b.containerSize.width,n=a.ui.hasScroll(e,"left")?e.scrollWidth:n,m=a.ui.hasScroll(e)?e.scrollHeight:m;b.parentData={element:e,left:l.left,top:l.top,width:n,height:m}}},resize:function(c,d){var b=a(this).data("resizable"),e=
b.options,f=b.containerOffset,k=b.position,p=b._aspectRatio||c.shiftKey,m={top:0,left:0},n=b.containerElement;n[0]!=document&&/static/.test(n.css("position"))&&(m=f);k.left<(b._helper?f.left:0)&&(b.size.width+=b._helper?b.position.left-f.left:b.position.left-m.left,p&&(b.size.height=b.size.width/e.aspectRatio),b.position.left=e.helper?f.left:0);k.top<(b._helper?f.top:0)&&(b.size.height+=b._helper?b.position.top-f.top:b.position.top,p&&(b.size.width=b.size.height*e.aspectRatio),b.position.top=b._helper?
f.top:0);b.offset.left=b.parentData.left+b.position.left;b.offset.top=b.parentData.top+b.position.top;e=Math.abs(b.offset.left-m.left+b.sizeDiff.width);f=Math.abs((b._helper?b.offset.top-m.top:b.offset.top-f.top)+b.sizeDiff.height);m=b.containerElement.get(0)==b.element.parent().get(0);k=/relative|absolute/.test(b.containerElement.css("position"));m&&k&&(e-=b.parentData.left);e+b.size.width>=b.parentData.width&&(b.size.width=b.parentData.width-e,p&&(b.size.height=b.size.width/b.aspectRatio));f+b.size.height>=
b.parentData.height&&(b.size.height=b.parentData.height-f,p&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(c,d){var b=a(this).data("resizable"),e=b.options,f=b.containerOffset,k=b.containerPosition,p=b.containerElement,m=a(b.helper),n=m.offset(),r=m.outerWidth()-b.sizeDiff.width,m=m.outerHeight()-b.sizeDiff.height;b._helper&&(!e.animate&&/relative/.test(p.css("position")))&&a(this).css({left:n.left-k.left-f.left,width:r,height:m});b._helper&&(!e.animate&&/static/.test(p.css("position")))&&
a(this).css({left:n.left-k.left-f.left,width:r,height:m})}});a.ui.plugin.add("resizable","ghost",{start:function(c,d){var b=a(this).data("resizable"),e=b.options,f=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("v-ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:"");b.ghost.appendTo(b.helper)},resize:function(c,d){var b=a(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",
height:b.size.height,width:b.size.width})},stop:function(c,d){var b=a(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(c,d){var b=a(this).data("resizable"),e=b.options,f=b.size,k=b.originalSize,p=b.originalPosition,m=b.axis;e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var n=Math.round((f.width-k.width)/(e.grid[0]||1))*(e.grid[0]||1),e=Math.round((f.height-k.height)/(e.grid[1]||1))*(e.grid[1]||1);
/^(se|s|e)$/.test(m)?(b.size.width=k.width+n,b.size.height=k.height+e):/^(ne)$/.test(m)?(b.size.width=k.width+n,b.size.height=k.height+e,b.position.top=p.top-e):(/^(sw)$/.test(m)?(b.size.width=k.width+n,b.size.height=k.height+e):(b.size.width=k.width+n,b.size.height=k.height+e,b.position.top=p.top-e),b.position.left=p.left-n)}});var f=function(a){return parseInt(a,10)||0},e=function(a){return!isNaN(parseInt(a,10))}})(vitruvian.jQuery);(function(a,h){var f,e,c,d,b=function(){var b=a(this).find(":v-ui-button");setTimeout(function(){b.button("refresh")},1)},g=function(b){var d=b.name,c=b.form,e=a([]);d&&(e=c?a(c).find("[name='"+d+"']"):a("[name='"+d+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",b);"boolean"!==typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var l=this,k=this.options,p="checkbox"===this.type||"radio"===this.type,m="v-ui-state-hover"+(p?"":" v-ui-state-active");null===k.label&&(k.label=this.buttonElement.html());this.buttonElement.addClass("v-ui-button v-ui-widget v-ui-state-default v-ui-corner-all").attr("role","button").bind("mouseenter.button",
function(){k.disabled||(a(this).addClass("v-ui-state-hover"),this===f&&a(this).addClass("v-ui-state-active"))}).bind("mouseleave.button",function(){k.disabled||a(this).removeClass(m)}).bind("click.button",function(a){k.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus.button",function(){l.buttonElement.addClass("v-ui-state-focus")}).bind("blur.button",function(){l.buttonElement.removeClass("v-ui-state-focus")});p&&(this.element.bind("change.button",function(){d||
l.refresh()}),this.buttonElement.bind("mousedown.button",function(a){k.disabled||(d=!1,e=a.pageX,c=a.pageY)}).bind("mouseup.button",function(a){k.disabled||e===a.pageX&&c===a.pageY||(d=!0)}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(k.disabled||d)return!1;a(this).toggleClass("v-ui-state-active");l.buttonElement.attr("aria-pressed",l.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(k.disabled||d)return!1;a(this).addClass("v-ui-state-active");
l.buttonElement.attr("aria-pressed","true");var b=l.element[0];g(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("v-ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(k.disabled)return!1;a(this).addClass("v-ui-state-active");f=this;a(document).one("mouseup",function(){f=null})}).bind("mouseup.button",function(){if(k.disabled)return!1;a(this).removeClass("v-ui-state-active")}).bind("keydown.button",function(b){if(k.disabled)return!1;
b.keyCode!=a.ui.keyCode.SPACE&&b.keyCode!=a.ui.keyCode.ENTER||a(this).addClass("v-ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("v-ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",k.disabled);this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?
this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("v-ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("v-ui-state-active");
this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("v-ui-helper-hidden-accessible");this.buttonElement.removeClass("v-ui-button v-ui-widget v-ui-state-default v-ui-corner-all v-ui-state-hover v-ui-state-active  v-ui-button-icons-only v-ui-button-icon-only v-ui-button-text-icons v-ui-button-text-icon-primary v-ui-button-text-icon-secondary v-ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".v-ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,arguments);"disabled"===b?d?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?g(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("v-ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("v-ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("v-ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("v-ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("v-ui-button-icons-only v-ui-button-icon-only v-ui-button-text-icons v-ui-button-text-icon-primary v-ui-button-text-icon-secondary v-ui-button-text-only"),
d=a("<span></span>",this.element[0].ownerDocument).addClass("v-ui-button-text").html(this.options.label).appendTo(b.empty()).text(),c=this.options.icons,e=c.primary&&c.secondary,n=[];c.primary||c.secondary?(this.options.text&&n.push("v-ui-button-text-icon"+(e?"s":c.primary?"-primary":"-secondary")),c.primary&&b.prepend("<span class='v-ui-button-icon-primary v-ui-icon "+c.primary+"'></span>"),c.secondary&&b.append("<span class='v-ui-button-icon-secondary v-ui-icon "+c.secondary+"'></span>"),this.options.text||
(n.push(e?"v-ui-button-icons-only":"v-ui-button-icon-only"),this.hasTitle||b.attr("title",d))):n.push("v-ui-button-text-only");b.addClass(n.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("v-ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,d){"disabled"===b&&this.buttons.button("option",b,d);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":v-ui-button").button("refresh").end().not(":v-ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("v-ui-corner-all v-ui-corner-left v-ui-corner-right").filter(":first").addClass(b?"v-ui-corner-right":"v-ui-corner-left").end().filter(":last").addClass(b?"v-ui-corner-left":"v-ui-corner-right").end().end()},destroy:function(){this.element.removeClass("v-ui-buttonset");
this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("v-ui-corner-left v-ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(vitruvian.jQuery);(function(a,h){var f={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},c=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(d){var b=
a(this).css(d).offset().top;0>b&&a(this).css("top",d.top-b)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var d=this,b=d.options,c=b.title||"&#160;",e=a.ui.dialog.getTitleId(d.element),f=(d.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("v-ui-dialog v-ui-widget v-ui-widget-content v-ui-corner-all "+
b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){b.closeOnEscape&&(!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE)&&(d.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){d.moveToTop(!1,a)});d.element.show().removeAttr("title").addClass("v-ui-dialog-content v-ui-widget-content").appendTo(f);var p=(d.uiDialogTitlebar=a("<div></div>")).addClass("v-ui-dialog-titlebar v-ui-widget-header v-ui-corner-all v-ui-helper-clearfix").prependTo(f),
m=a('<a href="#"></a>').addClass("v-ui-dialog-titlebar-close v-ui-corner-all").attr("role","button").hover(function(){m.addClass("v-ui-state-hover")},function(){m.removeClass("v-ui-state-hover")}).focus(function(){m.addClass("v-ui-state-focus")}).blur(function(){m.removeClass("v-ui-state-focus")}).click(function(a){d.close(a);return!1}).appendTo(p);(d.uiDialogTitlebarCloseText=a("<span></span>")).addClass("v-ui-icon v-ui-icon-closethick").text(b.closeText).appendTo(m);a("<span></span>").addClass("v-ui-dialog-title").attr("id",
e).html(c).prependTo(p);a.isFunction(b.beforeclose)&&!a.isFunction(b.beforeClose)&&(b.beforeClose=b.beforeclose);p.find("*").add(p).disableSelection();b.draggable&&a.fn.draggable&&d._makeDraggable();b.resizable&&a.fn.resizable&&d._makeResizable();d._createButtons(b.buttons);d._isOpen=!1;a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("v-ui-dialog-content v-ui-widget-content").hide().appendTo("body");
this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(d){var b=this,c,e;if(!1!==b._trigger("beforeClose",d))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.v-ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",d)}):(b.uiDialog.hide(),b._trigger("close",d)),a.ui.dialog.overlay.resize(),b.options.modal&&(c=0,a(".v-ui-dialog").each(function(){this!==
b.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(c=Math.max(c,e)))}),a.ui.dialog.maxZ=c),b},isOpen:function(){return this._isOpen},moveToTop:function(d,b){var c=this.options;if(c.modal&&!d||!c.stack&&!c.modal)return this._trigger("focus",b);c.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=c.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ));c={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=
1;this.uiDialog.css("z-index",a.ui.dialog.maxZ);this.element.attr(c);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var d=this.options,b=this.uiDialog;this.overlay=d.modal?new a.ui.dialog.overlay(this):null;this._size();this._position(d.position);b.show(d.show);this.moveToTop(!0);d.modal&&b.bind("keydown.v-ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",this),c=d.filter(":first"),d=d.filter(":last");if(b.target===d[0]&&!b.shiftKey)return c.focus(1),
!1;if(b.target===c[0]&&b.shiftKey)return d.focus(1),!1}});a(this.element.find(":tabbable").get().concat(b.find(".v-ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(d){var b=this,e=!1,f=a("<div></div>").addClass("v-ui-dialog-buttonpane v-ui-widget-content v-ui-helper-clearfix"),k=a("<div></div>").addClass("v-ui-dialog-buttonset").appendTo(f);b.uiDialog.find(".v-ui-dialog-buttonpane").remove();"object"===
typeof d&&null!==d&&a.each(d,function(){return!(e=!0)});e&&(a.each(d,function(d,e){e=a.isFunction(e)?{click:e,text:d}:e;var f=a('<button type="button"></button>').click(function(){e.click.apply(b.element[0],arguments)}).appendTo(k);a.each(e,function(a,b){if("click"!==a)if(a in c)f[a](b);else f.attr(a,b)});a.fn.button&&f.button()}),f.appendTo(b.uiDialog))},_makeDraggable:function(){function d(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,e=a(document),f;b.uiDialog.draggable({cancel:".v-ui-dialog-content, .v-ui-dialog-titlebar-close",
handle:".v-ui-dialog-titlebar",containment:"document",start:function(e,m){f="auto"===c.height?"auto":a(this).height();a(this).height(a(this).height()).addClass("v-ui-dialog-dragging");b._trigger("dragStart",e,d(m))},drag:function(a,c){b._trigger("drag",a,d(c))},stop:function(h,m){c.position=[m.position.left-e.scrollLeft(),m.position.top-e.scrollTop()];a(this).removeClass("v-ui-dialog-dragging").height(f);b._trigger("dragStop",h,d(m));a.ui.dialog.overlay.resize()}})},_makeResizable:function(d){function b(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}d=d===h?this.options.resizable:d;var c=this,e=c.options,f=c.uiDialog.css("position");d="string"===typeof d?d:"n,e,s,w,se,sw,ne,nw";c.uiDialog.resizable({cancel:".v-ui-dialog-content",containment:"document",alsoResize:c.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:c._minHeight(),handles:d,start:function(d,e){a(this).addClass("v-ui-dialog-resizing");c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",
a,b(d))},stop:function(d,f){a(this).removeClass("v-ui-dialog-resizing");e.height=a(this).height();e.width=a(this).width();c._trigger("resizeStop",d,b(f));a.ui.dialog.overlay.resize()}}).css("position",f).find(".v-ui-resizable-se").addClass("v-ui-icon v-ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(d){var b=[],c=[0,0],e;if(d){if("string"===typeof d||"object"===typeof d&&"0"in d)b=d.split?d.split(" "):
[d[0],d[1]],1===b.length&&(b[1]=b[0]),a.each(["left","top"],function(a,d){+b[a]===b[a]&&(c[a]=b[a],b[a]=d)}),d={my:b.join(" "),at:b.join(" "),offset:c.join(" ")};d=a.extend({},a.ui.dialog.prototype.options.position,d)}else d=a.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},d));e||this.uiDialog.hide()},_setOptions:function(d){var b=this,c={},l=!1;a.each(d,function(a,d){b._setOption(a,d);a in
f&&(l=!0);a in e&&(c[a]=d)});l&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",c)},_setOption:function(d,b){var c=this.uiDialog;switch(d){case "beforeclose":d="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":c.removeClass(this.options.dialogClass).addClass("v-ui-dialog v-ui-widget v-ui-widget-content v-ui-corner-all "+b);break;case "disabled":b?c.addClass("v-ui-dialog-disabled"):
c.removeClass("v-ui-dialog-disabled");break;case "draggable":var e=c.is(":data(draggable)");e&&!b&&c.draggable("destroy");!e&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(e=c.is(":data(resizable)"))&&!b&&c.resizable("destroy");e&&"string"===typeof b&&c.resizable("option","handles",b);e||!1===b||this._makeResizable(b);break;case "title":a(".v-ui-dialog-title",this.uiDialogTitlebar).html(""+(b||"&#160;"))}a.Widget.prototype._setOption.apply(this,arguments)},
_size:function(){var d=this.options,b,c,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});d.minWidth>d.width&&(d.width=d.minWidth);b=this.uiDialog.css({height:"auto",width:d.width}).height();c=Math.max(0,d.minHeight-b);"auto"===d.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),d=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(d,c))):this.element.height(Math.max(d.height-
b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"v-ui-dialog-title-"+a},overlay:function(d){this.$el=a.ui.dialog.overlay.create(d)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),
create:function(c){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(b){c.options.closeOnEscape&&(!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)&&(c.close(b),b.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||
a("<div></div>").addClass("v-ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(c){var b=a.inArray(c,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");c.remove();var e=0;a.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){var c,b;return a.browser.msie&&
7>a.browser.version?(c=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c<b?a(window).height()+"px":c+"px"):a(document).height()+"px"},width:function(){var c,b;return a.browser.msie?(c=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c<b?a(window).width()+"px":c+"px"):a(document).width()+"px"},resize:function(){var c=
a([]);a.each(a.ui.dialog.overlay.instances,function(){c=c.add(this)});c.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(vitruvian.jQuery);(function(a,h){var f=0,e=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"v-ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,d){"selected"==a?this.options.collapsible&&d==this.options.selected||
this.select(d):(this.options[a]=d,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++f},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name||"v-ui-tabs-"+ ++e);return a.cookie.apply(null,[c].concat(a.makeArray(arguments)))},_ui:function(a,d){return{tab:a,panel:d,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".v-ui-state-processing").removeClass("v-ui-state-processing").find("span:data(label.tabs)").each(function(){var c=
a(this);c.html(c.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display","");!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var b=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(c,d){var n=a(d).attr("href"),m=n.split("#")[0],r;m&&(m===location.toString().split("#")[0]||
(r=a("base")[0])&&m===r.href)&&(n=d.hash,d.href=n);f.test(n)?b.panels=b.panels.add(b.element.find(b._sanitizeSelector(n))):n&&"#"!==n?(a.data(d,"href.tabs",n),a.data(d,"load.tabs",n.replace(/#.*$/,"")),n=b._tabId(d),d.href="#"+n,m=b.element.find("#"+n),m.length||(m=a(e.panelTemplate).attr("id",n).addClass("v-ui-tabs-panel v-ui-widget-content v-ui-corner-bottom").insertAfter(b.panels[c-1]||b.list),m.data("destroy.tabs",!0)),b.panels=b.panels.add(m)):e.disabled.push(c)});c?(this.element.addClass("v-ui-tabs v-ui-widget v-ui-widget-content v-ui-corner-all"),
this.list.addClass("v-ui-tabs-nav v-ui-helper-reset v-ui-helper-clearfix v-ui-widget-header v-ui-corner-all"),this.lis.addClass("v-ui-state-default v-ui-corner-top"),this.panels.addClass("v-ui-tabs-panel v-ui-widget-content v-ui-corner-bottom"),e.selected===h?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),"number"!==typeof e.selected&&e.cookie&&(e.selected=parseInt(b._cookie(),10)),"number"!==typeof e.selected&&this.lis.filter(".v-ui-tabs-selected").length&&
(e.selected=this.lis.index(this.lis.filter(".v-ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):null===e.selected&&(e.selected=-1),e.selected=0<=e.selected&&this.anchors[e.selected]||0>e.selected?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".v-ui-state-disabled"),function(a,c){return b.lis.index(a)}))).sort(),-1!=a.inArray(e.selected,e.disabled)&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("v-ui-tabs-hide"),this.lis.removeClass("v-ui-tabs-selected v-ui-state-active"),
0<=e.selected&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[e.selected].hash)).removeClass("v-ui-tabs-hide"),this.lis.eq(e.selected).addClass("v-ui-tabs-selected v-ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[e.selected],b.element.find(b._sanitizeSelector(b.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs");b.lis=b.anchors=b.panels=null})):e.selected=this.lis.index(this.lis.filter(".v-ui-tabs-selected"));
this.element[e.collapsible?"addClass":"removeClass"]("v-ui-tabs-collapsible");e.cookie&&this._cookie(e.selected,e.cookie);c=0;for(var k;k=this.lis[c];c++)a(k)[-1==a.inArray(c,e.disabled)||a(k).hasClass("v-ui-tabs-selected")?"removeClass":"addClass"]("v-ui-state-disabled");!1===e.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==e.event){var p=function(a,b){b.is(":not(.v-ui-state-disabled)")&&b.addClass("v-ui-state-"+a)};this.lis.bind("mouseover.tabs",
function(){p("hover",a(this))});this.lis.bind("mouseout.tabs",function(){a(this).removeClass("v-ui-state-hover")});this.anchors.bind("focus.tabs",function(){p("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){a(this).closest("li").removeClass("v-ui-state-focus")})}var m,n;e.fx&&(a.isArray(e.fx)?(m=e.fx[0],n=e.fx[1]):m=n=e.fx);var r=n?function(c,e){a(c).closest("li").addClass("v-ui-tabs-selected v-ui-state-active");e.hide().removeClass("v-ui-tabs-hide").animate(n,n.duration||
"normal",function(){d(e,n);b._trigger("show",null,b._ui(c,e[0]))})}:function(c,d){a(c).closest("li").addClass("v-ui-tabs-selected v-ui-state-active");d.removeClass("v-ui-tabs-hide");b._trigger("show",null,b._ui(c,d[0]))},q=m?function(a,c){c.animate(m,m.duration||"normal",function(){b.lis.removeClass("v-ui-tabs-selected v-ui-state-active");c.addClass("v-ui-tabs-hide");d(c,m);b.element.dequeue("tabs")})}:function(a,c,d){b.lis.removeClass("v-ui-tabs-selected v-ui-state-active");c.addClass("v-ui-tabs-hide");
b.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var c=this,d=a(c).closest("li"),f=b.panels.filter(":not(.v-ui-tabs-hide)"),n=b.element.find(b._sanitizeSelector(c.hash));if(d.hasClass("v-ui-tabs-selected")&&!e.collapsible||d.hasClass("v-ui-state-disabled")||d.hasClass("v-ui-state-processing")||b.panels.filter(":animated").length||!1===b._trigger("select",null,b._ui(this,n[0])))return this.blur(),!1;e.selected=b.anchors.index(this);b.abort();if(e.collapsible){if(d.hasClass("v-ui-tabs-selected"))return e.selected=
-1,e.cookie&&b._cookie(e.selected,e.cookie),b.element.queue("tabs",function(){q(c,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&b._cookie(e.selected,e.cookie),b.element.queue("tabs",function(){r(c,n)}),b.load(b.anchors.index(this)),this.blur(),!1}e.cookie&&b._cookie(e.selected,e.cookie);if(n.length)f.length&&b.element.queue("tabs",function(){q(c,f)}),b.element.queue("tabs",function(){r(c,n)}),b.load(b.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";
a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]")));return a},destroy:function(){var c=this.options;this.abort();this.element.unbind(".tabs").removeClass("v-ui-tabs v-ui-widget v-ui-widget-content v-ui-corner-all v-ui-tabs-collapsible").removeData("tabs");this.list.removeClass("v-ui-tabs-nav v-ui-helper-reset v-ui-helper-clearfix v-ui-widget-header v-ui-corner-all");
this.anchors.each(function(){var c=a.data(this,"href.tabs");c&&(this.href=c);var b=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,c){b.removeData(c+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("v-ui-state-default v-ui-corner-top v-ui-tabs-selected v-ui-state-active v-ui-state-hover v-ui-state-focus v-ui-state-disabled v-ui-tabs-panel v-ui-widget-content v-ui-corner-bottom v-ui-tabs-hide")});
c.cookie&&this._cookie(null,c.cookie);return this},add:function(c,d,b){b===h&&(b=this.anchors.length);var e=this,f=this.options;d=a(f.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d));c=c.indexOf("#")?this._tabId(a("a",d)[0]):c.replace("#","");d.addClass("v-ui-state-default v-ui-corner-top").data("destroy.tabs",!0);var k=e.element.find("#"+c);k.length||(k=a(f.panelTemplate).attr("id",c).data("destroy.tabs",!0));k.addClass("v-ui-tabs-panel v-ui-widget-content v-ui-corner-bottom v-ui-tabs-hide");
b>=this.lis.length?(d.appendTo(this.list),k.appendTo(this.list[0].parentNode)):(d.insertBefore(this.lis[b]),k.insertBefore(this.panels[b]));f.disabled=a.map(f.disabled,function(a,c){return a>=b?++a:a});this._tabify();1==this.anchors.length&&(f.selected=0,d.addClass("v-ui-tabs-selected v-ui-state-active"),k.removeClass("v-ui-tabs-hide"),this.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[0],e.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[b],this.panels[b]));
return this},remove:function(c){c=this._getIndex(c);var d=this.options,b=this.lis.eq(c).remove(),e=this.panels.eq(c).remove();b.hasClass("v-ui-tabs-selected")&&1<this.anchors.length&&this.select(c+(c+1<this.anchors.length?1:-1));d.disabled=a.map(a.grep(d.disabled,function(a,b){return a!=c}),function(a,b){return a>=c?--a:a});this._tabify();this._trigger("remove",null,this._ui(b.find("a")[0],e[0]));return this},enable:function(c){c=this._getIndex(c);var d=this.options;if(-1!=a.inArray(c,d.disabled))return this.lis.eq(c).removeClass("v-ui-state-disabled"),
d.disabled=a.grep(d.disabled,function(a,d){return a!=c}),this._trigger("enable",null,this._ui(this.anchors[c],this.panels[c])),this},disable:function(a){a=this._getIndex(a);var d=this.options;a!=d.selected&&(this.lis.eq(a).addClass("v-ui-state-disabled"),d.disabled.push(a),d.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(-1==a)if(this.options.collapsible&&-1!=this.options.selected)a=this.options.selected;
else return this;this.anchors.eq(a).trigger(this.options.event+".tabs");return this},load:function(c){c=this._getIndex(c);var d=this,b=this.options,e=this.anchors.eq(c)[0],f=a.data(e,"load.tabs");this.abort();if(!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(c).addClass("v-ui-state-processing");if(b.spinner){var k=a("span",e);k.data("label.tabs",k.html()).html(b.spinner)}this.xhr=a.ajax(a.extend({},b.ajaxOptions,{url:f,success:function(f,
m){d.element.find(d._sanitizeSelector(e.hash)).html(f);d._cleanup();b.cache&&a.data(e,"cache.tabs",!0);d._trigger("load",null,d._ui(d.anchors[c],d.panels[c]));try{b.ajaxOptions.success(f,m)}catch(n){}},error:function(a,f,n){d._cleanup();d._trigger("load",null,d._ui(d.anchors[c],d.panels[c]));try{b.ajaxOptions.error(a,f,c,e)}catch(r){}}}));d.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.element.queue("tabs",this.element.queue("tabs").splice(-2,
2));this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup();return this},url:function(a,d){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.18"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,d){var b=this,e=this.options,f=b._rotate||(b._rotate=function(d){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var a=e.selected;b.select(++a<b.anchors.length?a:0)},a);
d&&d.stopPropagation()}),k=b._unrotate||(b._unrotate=d?function(a){t=e.selected;f()}:function(a){a.clientX&&b.rotate(null)});a?(this.element.bind("tabsshow",f),this.anchors.bind(e.event+".tabs",k),f()):(clearTimeout(b.rotation),this.element.unbind("tabsshow",f),this.anchors.unbind(e.event+".tabs",k),delete this._rotate,delete this._unrotate);return this}})})(vitruvian.jQuery);(function(a,h){function f(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],
16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?l.transparent:l[a.trim(b).toLowerCase()]}function e(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function c(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in p||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function d(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function b(b,c,d,e){"object"==typeof b&&(e=c,d=null,c=b,b=c.effect);a.isFunction(c)&&(e=c,d=null,c={});if("number"==typeof c||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null);c=c||{};d=d||c.duration;d=a.fx.off?0:"number"==typeof d?
d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;e=e||c.complete;return[b,c,d,e]}function g(b){return!b||("number"===typeof b||a.fx.speeds[b])||"string"===typeof b&&!a.effects[b]?!0:!1}a.effects={};a.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(b,c){a.fx.step[c]=function(b){if(!b.colorInit){var d;d=b.elem;var e=c,m;do{m=a.curCSS(d,e);if(""!=m&&"transparent"!=m||a.nodeName(d,"body"))break;e="backgroundColor"}while(d=
d.parentNode);d=f(m);b.start=d;b.end=f(b.end);b.colorInit=!0}b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],p={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,f,r,q){a.isFunction(r)&&(q=r,r=null);return this.queue(function(){var s=a(this),g=s.attr("style")||
" ",l=c(e.call(this)),h,p=s.attr("class");a.each(k,function(a,c){if(b[c])s[c+"Class"](b[c])});h=c(e.call(this));s.attr("class",p);s.animate(d(l,h),{queue:!1,duration:f,easing:r,complete:function(){a.each(k,function(a,c){if(b[c])s[c+"Class"](b[c])});"object"==typeof s.attr("style")?(s.attr("style").cssText="",s.attr("style").cssText=g):s.attr("style",g);q&&q.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,
[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,c,d,e,f){return"boolean"==typeof c||c===h?d?a.effects.animateClass.apply(this,[c?{add:b}:{remove:b},d,e,f]):this._toggleClass(b,c):a.effects.animateClass.apply(this,[{toggle:b},c,d,e])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,
remove:b},d,e,f])}});a.extend(a.effects,{version:"1.8.18",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".v-ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("v-ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;b.wrap(d);(b[0]===e||a.contains(b[0],e))&&a(e).focus();d=b.parent();"static"==b.css("position")?
(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".v-ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),
c):b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){unit=b.cssUnit(c);0<unit[0]&&(e[c]=unit[0]*d+unit[1])});return e}});a.fn.extend({effect:function(c,d,e,f){var g=b.apply(this,arguments),l={options:g[1],duration:g[2],callback:g[3]},g=l.options.mode,k=a.effects[c];return a.fx.off||!k?g?this[g](l.duration,l.callback):this.each(function(){l.callback&&l.callback.call(this)}):k.call(this,l)},_show:a.fn.show,show:function(a){if(g(a))return this._show.apply(this,arguments);var c=b.apply(this,
arguments);c[1].mode="show";return this.effect.apply(this,c)},_hide:a.fn.hide,hide:function(a){if(g(a))return this._hide.apply(this,arguments);var c=b.apply(this,arguments);c[1].mode="hide";return this.effect.apply(this,c)},__toggle:a.fn.toggle,toggle:function(c){if(g(c)||"boolean"===typeof c||a.isFunction(c))return this.__toggle.apply(this,arguments);var d=b.apply(this,arguments);d[1].mode="toggle";return this.effect.apply(this,d)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%",
"pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=
b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(b,a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+c},easeInOutQuint:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*
b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(b,a,c,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,e){return d*Math.sin(a/e*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+c},easeInExpo:function(b,a,c,d,e){return 0==a?c:d*Math.pow(2,10*(a/e-1))+c},easeOutExpo:function(b,a,c,d,e){return a==e?c+d:d*(-Math.pow(2,-10*a/e)+1)+c},easeInOutExpo:function(b,a,c,d,e){return 0==a?c:a==e?c+d:1>(a/=e/2)?d/2*Math.pow(2,10*(a-1))+c:d/
2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(b,a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c},easeInOutCirc:function(a,b,c,d,e){return 1>(b/=e/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(b,a,c,d,e){b=1.70158;var f=0,g=d;if(0==a)return c;if(1==(a/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/
f))+c},easeOutElastic:function(b,a,c,d,e){b=1.70158;var f=0,g=d;if(0==a)return c;if(1==(a/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin((a*e-b)*2*Math.PI/f)+d+c},easeInOutElastic:function(b,a,c,d,e){b=1.70158;var f=0,g=d;if(0==a)return c;if(2==(a/=e/2))return c+d;f||(f=e*0.3*1.5);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)+c:0.5*g*Math.pow(2,
-10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)+d+c},easeInBack:function(a,b,c,d,e,f){f==h&&(f=1.70158);return d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(b,a,c,d,e,f){f==h&&(f=1.70158);return d*((a=a/e-1)*a*((f+1)*a+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){f==h&&(f=1.70158);return 1>(b/=e/2)?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(b,a,c,d,e){return(a/=e)<1/2.75?
d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?0.5*a.easing.easeInBounce(b,2*c,0,e,f)+d:0.5*a.easing.easeOutBounce(b,2*c-f,0,e,f)+0.5*e+d}})})(vitruvian.jQuery);(function(a,h){a.effects.fade=function(f){return this.queue(function(){var e=a(this),c=a.effects.setMode(e,f.options.mode||"hide");e.animate({opacity:c},{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){f.callback&&f.callback.apply(this,arguments);e.dequeue()}})})}})(vitruvian.jQuery);(function(a,h){a.getSelectedText=function(){var a="";window.getSelection?a=window.getSelection():document.getSelection?a=document.getSelection():document.selection&&(a=document.selection.createRange().text);a=a.toString().trim();if(/[^\u0000-\u00ff]/.test(a))a=a.substr(0,Math.min(a.length,50));else{var a=a.replace(/[^a-zA-Z 0-9_-]+/g,""),e=a.split(/[\s]+/).filter(function(a){return""!=a}),a="";for(i=0;i<e.length&&!(50<=a.length+e[i].length);i++)a=a+(i?" ":"")+e[i];a.length||(a=e.join(" "),a=a.substr(0,
Math.min(a.length,50)))}return a};a.clearSelectedText=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty&&document.selection.empty()};a.hideFlashObjects=function(){h("MiniBrowser","Hiding Flash Objects");var f=a('object[classid*="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"]');a.each(f,function(e,c){var d=a(c),b="undefined";a.each(d.children("param"),
function(a,c){if("wmode"==(c.getAttribute("name")+"").toLowerCase())return b=(c.getAttribute("value")+"").toLowerCase(),!1});"opaque"!=b&&"transparent"!=b&&(h("MiniBrowser","Hiding Flash Object",d.attr("id")),d.attr("data-flashhack",d.css("visibility")),d.css("visibility","hidden"))})};a.showFlashObjects=function(){h("MiniBrowser","Showing Flash Objects");var f=a('object[classid*="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"]');a.each(f,function(e,c){var d=a(c),b=d.attr("data-flashhack");b&&(h("MiniBrowser",
"Showing Flash Object",d.attr("id")),d.css("visibility",b))})}})(vitruvian.$,vitruvian.log);(function(a,h,f,e){h.wikipediaPage=function(c){var d=h.Deferred();h.getJSON(a+"//en.wikipedia.org/w/api.php?action=mobileview&sections=0|1|2|3|4|5|6|7|8|9&prop=text&format=json&callback=?&page="+encodeURIComponent(c)).done(function(b){if(b&&b.mobileview&&10===b.mobileview.sections.length){var e="";h.each(b.mobileview.sections,function(a,b){b.text&&(e+=b.text)});var f=h("<div/>").append(e);if(e.match(/^<ol><li>[\s]*redirect/i))b=f.find("a:first").attr("title"),h.wikipediaPage(b).done(function(){d.resolve.apply(d,
arguments)}).fail(function(){d.reject.apply(d,arguments)});else if(f.find("#disambigbox").length){var k=[];b=f.find("> ul > li");h.each(b,function(a,b){k.push({page:h(b).find("a:first").text().replace(/\s/g,"_"),title:h(b).find("a:first").text(),desc:h(b).text()})});d.resolve({page:c,title:c.replace(/[_]/g," "),disambigs:k})}else b=f.children("p:first").text().replace(/\[[0-9]+\]/ig,""),f=f.find("img").filter(function(){return 100<h(this).attr("width")||100<h(this).attr("height")}).first(),f=0!==
f.length?{src:a+f.attr("src").replace(/^http[s]?:/i,""),width:parseInt(f.attr("width")),height:parseInt(f.attr("height"))}:null,d.resolve({page:c,title:c.replace(/[_]/g," "),synopsis:b,image:f})}else d.resolve(null)}).fail(function(){d.reject.apply(d,arguments)});return d};h.wikipediaSearch=function(c){var d=h.Deferred();h.getJSON(a+"//en.wikipedia.org/w/api.php?action=opensearch&callback=?&limit=1&search="+encodeURIComponent(c)).done(function(a){a&&a[1]&&a[1][0]?(a=a[1][0].replace(/\s/g,"_"),h.wikipediaPage(a).done(function(a){d.resolve(a)}).fail(function(){d.reject.apply(d,
arguments)})):d.resolve(null)}).fail(function(){d.reject.apply(d,arguments)});return d.promise()};h.bingWebSearch=function(c){var d=h.Deferred(),b=a+"//"+f+"/bingwebsearch?Market=%27en-US%27&Adult=%27Off%27&$top=3&$format=JSON&$callback=?&Query=%27"+encodeURIComponent(c)+"+-wikipedia.org%27";h.ajax({url:b,dataType:"jsonp",cache:!0}).done(function(a){a&&a.d&&a.d.results?d.resolve({Results:a.d.results,Query:c}):d.resolve(null)}).fail(function(){d.reject.apply(d,arguments)});return d.promise()};h.msTranslate=
function(c,d,b){var e=h.Deferred();h.msTranslateAuthenticate().done(function(f){f?(f=a+"//api.microsofttranslator.com/V2/Ajax.svc/Translate?&oncomplete=?&appId=Bearer "+encodeURIComponent(f)+"&text="+encodeURIComponent(c)+"&from="+encodeURIComponent(d)+"&to="+encodeURIComponent(b),h.getJSON(f).done(function(a){e.resolve(a)}).fail(function(){e.reject.apply(e,arguments)})):e.reject(null)}).fail(function(){e.reject.apply(e,arguments)});return e.promise()};h.msTranslateSpeak=function(c,d){var b=h.Deferred();
h.msTranslateAuthenticate().done(function(e){e?(e=a+"//api.microsofttranslator.com/V2/Http.svc/Speak?&options=MaxQuality&appId=Bearer "+encodeURIComponent(e)+"&text="+encodeURIComponent(c)+"&language="+encodeURIComponent(d),b.resolve(e)):b.reject(null)}).fail(function(){b.reject.apply(b,arguments)});return b.promise()};h.msTranslateAuthenticate=function(){var c=h.Deferred();h.ajax({url:a+"//"+f+"/mstranslateaccesstoken?callback=?",dataType:"jsonp",jsonpCallback:"b337ac117afd48548c1b1a04a481c90b_"+
e,cache:!0}).done(function(a){a?c.resolve(a.access_token):c.reject(null)}).fail(function(){c.reject.apply(c,arguments)});return c.promise()};h.wordnetThesaurus=function(c){return h.ajax({url:a+"//"+f+"/thesaurus?callback=?&q="+c,dataType:"jsonp",cache:!0})}})(document.location.protocol,vitruvian.$,vitruvian.res.HOST_WIDGETS,vitruvian.timestamp);(function(a,h){a.widget("ui.researchpanel",{version:"1.0.0",options:{busyselector:"#minibrowser-rsrchtab",busyclass:"v-ui-state-processing"},_create:function(){var f=this._data={},e=this._tmpl={},c=this._dom={};f.query=null;f.wiki=null;f.search=null;e.resultfooter=function(a,b,c){return'<table><tr><td><a href="'+b+'" target="_blank">'+a+'</a></td><td style="text-align: right;"><div class="'+c+'"/></td></tr></table>'};e.wikiarticle=function(a){html="";html+='<div class="researchpanel-wikiarticle">';
a.image&&(html+='<img src="'+a.image.src+'" style="width: '+a.image.width+"px; height: "+a.image.height+'px;"/>');html+="<div>"+a.synopsis+"</div>";html+=e.resultfooter("Read More \u00bb","http://en.wikipedia.org/wiki/"+a.page,"researchpanel-wikirslts-icon");return html+="</div>"};e.wikidisambig=function(c){html="";html+='<div class="researchpanel-wikidisambig">';html+='<div class="researchpanel-icon-disambig"/>';html+="<div>The term <em>"+c.title+"</em> may refer to:</div>";html+="<ul>";var b=0;
a.each(c.disambigs,function(a,c){html+="<li>"+c.desc.replace(c.title,'<a href="http://en.wikipedia.org/wiki/'+c.page+'" target="_blank">'+c.title+"</a>")+"</li>";if(3==++b)return!1});html+="</ul>";var f=c.disambigs.length-b;html+="<div>";f&&(html+="Or "+f+" other related concept"+(1<f?"s":"")+".");html+="</div>";html+=e.resultfooter("Read More \u00bb","http://en.wikipedia.org/wiki/"+c.page,"researchpanel-wikirslts-icon");return html+="</div>"};e.searchresults=function(c){var b="";a.each(c.Results,
function(a,c){b+='<div class="researchpanel-srchrslts-rslt">';b+='<a class="researchpanel-srchrslts-title" href="'+c.Url+'" target="_blank">'+c.Title+"</a>";b+='<div class="researchpanel-srchrslts-url">'+c.Url+"</div>";b+='<div class="researchpanel-srchrslts-desc">'+c.Description+"</div>";b+="</div>"});return b+=e.resultfooter("More Search Results \u00bb","http://www.bing.com/search?q="+c.Query,"researchpanel-srchrslts-icon")};c.message=a('<div class="researchpanel-msg" style="display: none;"></div>').appendTo(this.element);
c.wikiresults=a('<div class="researchpanel-wikirslts" style="display: none;"></div>').appendTo(this.element);c.separator=a('<div class="researchpanel-separator" style="display: none;"></div>').appendTo(this.element);c.searchresults=a('<div class="researchpanel-srchrslts" style="display: none;"></div>').appendTo(this.element);a(this.element).addClass("researchpanel");this._refresh()},_refresh:function(){var f=this.options,e=this._data,c=this._tmpl,d=this._dom;d.message.empty();d.wikiresults.empty();
d.searchresults.empty();var b=[];e.wiki||e.search?(e.wiki&&(e.wiki.disambigs?d.wikiresults.append(c.wikidisambig(e.wiki)):d.wikiresults.append(c.wikiarticle(e.wiki)),b.push(d.wikiresults[0])),e.wiki&&e.search&&b.push(d.separator[0]),e.search&&(d.searchresults.append(c.searchresults(e.search)),b.push(d.searchresults[0]))):(e.wiki===h||e.search===h?d.message.append("An error occurred. Please refresh the page and try again."):d.message.append("No results found."),b.push(d.message[0]));a(b).animate({opacity:"show",
height:"show"},"fast");a(f.busyselector).removeClass(f.busyclass)},destroy:function(){var f=this.options,e=this._dom;a(this.element).removeClass("researchpanel");a(f.busyselector).removeClass(f.busyclass);e.message.remove();e.wikiresults.remove();e.separator.remove();e.searchresults.remove();a.Widget.prototype.destroy.call(this)},fetchdata:function(f){var e=this,c=this.options,d=e._data;e.cleardata();a(c.busyselector).addClass(c.busyclass);a.when(a.wikipediaSearch(f),a.bingWebSearch(f)).done(function(a,
c){if(a&&a.image){var l=e._proportionalResize(a.image.width,a.image.height,100,100);a.image.width=l.width;a.image.height=l.height}d.query=f;d.wiki=a;d.search=c;e._refresh()}).fail(function(){d.query=f;d.wiki=h;d.search=h;e._refresh()})},cleardata:function(){var a=this._data,e=this._dom,c={opacity:"hide",height:"hide"};a.query=null;a.wiki=null;a.search=null;e.message.animate(c,"fast");e.wikiresults.animate(c,"fast");e.separator.animate(c,"fast");e.searchresults.animate(c,"fast")},_proportionalResize:function(a,
e,c,d){c=Math.min(parseFloat(c)/a,parseFloat(d)/e);e*=c;return{width:parseInt(c*a),height:parseInt(e)}}})})(vitruvian.$);(function(a){a.widget("ui.selectmenu",{version:"1.0.0",options:{items:[],selectedItem:null,buttonText:"Select: ",selectionChanged:null},_create:function(){var h=this._data={},f=this._tmpl={},e=this._dom={};h.items=this.options.items;h.selectedItem=this.options.selectedItem;f.buttonText=function(a,d){var b;b="<div>"+a;b+=d?" "+d.name:"";return b+="</div>"};f.menu=function(c,d){html="";a.each(c,function(a,c){html+='<li data-selectmenu-code="'+c.code+'" class="selectmenu-menuitem'+(d&&d.code==c.code?
" selectmenu-state-selected":"")+'">';html+=c.name;html+="</li>"});return html};e.button=a(this.element).button({icons:{secondary:"v-ui-icon-triangle-1-s"}});e.menu=a('<ul class="selectmenu-menu" style="display: none;"></ul>').insertAfter(this.element);e.button.addClass("selectmenu-button");e.button.bind("click.selectmenu-button",function(a){e.menu.is(":visible")?e.menu.hide():(e.menu.width(e.button.outerWidth()),e.menu.show(),e.menu.position({my:"left top",at:"left bottom",of:e.button}));return!1});
a(document).bind("click.selectmenu-body",function(a){e.menu.is(":visible")&&e.menu.hide()});this._refresh()},_refresh:function(){var h=this,f=h._data,e=h._tmpl,c=h._dom;c.button.button("option","label",e.buttonText(h.options.buttonText,f.selectedItem));c.menu.html(e.menu(f.items,f.selectedItem));c.menu.find("li").bind("click.selectmenu-menuitem",function(d){var b=a(this).attr("data-selectmenu-code");a.each(f.items,function(a,c){b===c.code&&(f.selectedItem=c,h._trigger("selectionChanged",d,c),h._refresh())});
c.menu.hide();return!1})},destroy:function(){var h=this._dom;h.button.removeClass("selectmenu-button");h.button.unbind("click.selectmenu-button");h.menu.find("li").unbind("click.selectmenu-menuitem");a(document).unbind("click.selectmenu-body");h.button.button("destroy");h.menu.remove();a.Widget.prototype.destroy.call(this)}})})(vitruvian.$);(function(a,h){a.widget("ui.translatepanel",{version:"1.0.0",options:{busyselector:"#minibrowser-trnslttab",busyclass:"v-ui-state-processing"},_create:function(){var f=this,e=f._data={},c=f._dom={};f._xhr={};e.query=null;e.trnsltlangs=f._trnsltlangs();e.speaklangs="ca ca-es da da-dk de de-de en en-au en-ca en-gb en-in en-us es es-es es-mx fi fi-fi fr fr-ca fr-fr it it-it ja ja-jp ko ko-kr nb-no nl nl-nl no pl pl-pl pt pt-br pt-pt ru ru-ru sv sv-se zh-chs zh-cht zh-cn zh-hk zh-tw".split(" ");e.from=
e.trnsltlangs[0];e.to=e.trnsltlangs[33];e.translation=null;a(f.element).addClass("translatepanel");c.frombutton=a('<button class="translatepanel-frombutton"></button>').appendTo(f.element).selectmenu({buttonText:"From: ",items:e.trnsltlangs,selectedItem:e.from,selectionChanged:function(a,b){e.from=b;f.fetchdata(e.query)}});c.tobutton=a('<button class="translatepanel-tobutton"></button>').appendTo(f.element).selectmenu({buttonText:"To: ",items:e.trnsltlangs.slice(1,e.trnsltlangs.length),selectedItem:e.to,
selectionChanged:function(a,b){e.to=b;f.fetchdata(e.query)}});c.translation=a('<textarea class="translatepanel-translation" readonly="readonly"></textarea>').appendTo(f.element);c.speakbutton=a('<a href="#" title="Speak this translation"></a>').appendTo(f.element);c.speakbutton.wrap('<div class="translatepanel-speak"/>');c.icon=a('<div class="translatepanel-iconbar"><div class="translatepanel-icon"/></div>').appendTo(f.element);c.speakbutton.bind("click.translatepanel",function(a){f._speak(f._data.translation,
f._data.to.code);a.preventDefault()});f._refresh()},_refresh:function(){var f=this.options,e=this._data,c=this._dom;c.translation.text("");e.translation?(c.translation.text(e.translation),-1!=e.speaklangs.indexOf(e.to.code)&&c.speakbutton.show()):e.translation===h?c.translation.text("An error occurred. Please refresh the page and try again."):c.translation.text("No translation available.");a(f.busyselector).removeClass(f.busyclass)},destroy:function(){var f=this.options,e=this._dom;a(f.busyselector).removeClass(f.busyclass);
a(this.element).removeClass("translatepanel");e.icon.remove();e.speakbutton.remove();e.translation.remove();e.frombutton.selectmenu("destroy");e.frombutton.remove();e.tobutton.selectmenu("destroy");e.tobutton.remove();a.Widget.prototype.destroy.call(this)},fetchdata:function(f){var e=this,c=this.options,d=e._data;e.cleardata();a(c.busyselector).addClass(c.busyclass);a.msTranslate(f,d.from.code,d.to.code).done(function(a){a&&(d.query=f,d.translation=a,e._refresh())}).fail(function(){d.query=f;d.translation=
h;e._refresh()})},cleardata:function(){var a=this._data,e=this._dom;a.query=null;a.translation=null;e.translation.empty();e.speakbutton.hide()},_trnsltlangs:function(){var a;a="=Auto-Detect;ar=Arabic;bg=Bulgarian;ca=Catalan;zh-chs=Chinese Simplified;zh-cht=Chinese Traditional;cs=Czech;da=Danish;nl=Dutch;en=English;et=Estonian;fi=Finnish;fr=French;de=German;el=Greek;hu=Hungarian;ht=Haitian Creole;he=Hebrew;hi=Hindi;mww=Hmong Daw;id=Indonesian;it=Italian;ja=Japanese;ko=Korean;lv=Latvian;lt=Lithuanian;no=Norwegian;pl=Polish;pt=Portuguese;ro=Romanian;ru=Russian;sk=Slovak;sl=Slovenian;es=Spanish;sv=Swedish;th=Thai;tr=Turkish;uk=Ukrainian;vi=Vietnamese".split(";");
for(var e=0;e<a.length;e++){var c=a[e].split("=");a[e]={code:c[0]+"",name:c[1]+""}}return a},_speak:function(f,e){a.msTranslateSpeak(f,e).done(function(c){c&&(c=""+('<![if !IE]><embed src="'+c+'" hidden="true" autostart="true" loop="false" /><![endif]>')+('\x3c!--[if IE]><bgsound src="'+c+'" autostart="true" loop="1"><![endif]--\x3e'),a("body").append(c))})}})})(vitruvian.$);(function(a,h){a.widget("ui.thesauruspanel",{version:"1.0.0",options:{busyselector:"#minibrowser-thsrstab",busyclass:"v-ui-state-processing"},_create:function(){var f=this._data={},e=this._tmpl={},c=this._dom={};f.query=null;f.synsets=null;e.thesaurus=function(c){var b="";a.each(c.synsets,function(c,d){b+='<div class="thesauruspanel-rslt">';b+="<div>";b+='<span class="thesauruspanel-pos">'+d.POS+"</span> ";b+=d.Gloss;d.Words[0]&&(b+=' [syn:&nbsp;<span class="thesauruspanel-words">',a.each(d.Words,
function(a,c){b+='<a href="http://www.wordnik.com/words/'+c+'" target="_blank">'+c+"</a>";a<d.Words.length-1&&(b+=",&nbsp;")}),b+="</span>]");b+="</div>";b+="</div>"});return b};c.message=a('<div class="thesauruspanelmsg" style="display: none;"></div>').appendTo(this.element);c.synsets=a('<div class="thesauruspanel-synsets" style="display: none;"></div>').appendTo(this.element);c.icon=a('<div class="thesauruspanel-iconbar"><div class="thesauruspanel-icon"/></div>').appendTo(this.element);a(this.element).addClass("thesauruspanel");
this._refresh()},_refresh:function(){var f=this.options,e=this._data,c=this._tmpl,d=this._dom;d.message.empty();d.synsets.empty();var b=[];e.synsets&&e.synsets.length?(d.synsets.append(c.thesaurus(e)),b.push(d.synsets[0])):(e.synsets===h?d.message.append("An error occurred. Please refresh the page and try again."):d.message.append("No results found."),b.push(d.message[0]));a(b).animate({opacity:"show",height:"show"},"fast");a(f.busyselector).removeClass(f.busyclass)},destroy:function(){var f=this.options,
e=this._dom;a(this.element).removeClass("thesauruspanel");a(f.busyselector).removeClass(f.busyclass);e.message.remove();e.synsets.remove();e.icon.remove();a.Widget.prototype.destroy.call(this)},fetchdata:function(f){var e=this,c=e.options,d=e._data;e.cleardata();a(c.busyselector).addClass(c.busyclass);a.wordnetThesaurus(f).done(function(a){d.query=f;d.synsets=a;e._refresh()}).fail(function(){d.query=f;d.synsets=h;e._refresh()})},cleardata:function(){var a=this._data,e=this._dom,c={opacity:"hide",
height:"hide"};a.query=null;a.synsets=null;e.message.animate(c,"fast");e.synsets.animate(c,"fast")}})})(vitruvian.$);(function(a,h,f){a.widget("ui.minibrowser",{version:"1.0.0",options:{query:null},_create:function(){var e=this,c=e._data={},d=e._dom={};c.query=e.options.query;a(e.element).addClass("minibrowser");d.dialog=e.element.dialog({autoOpen:!1,show:{effect:"fade",duration:"fast"},hide:{effect:"fade",duration:"fast"},title:"",minWidth:320,minHeight:240,width:500,height:400,buttons:{hack:function(){}},position:"center",zIndex:2147483600});d.dialogwrapper=d.dialog.closest(".v-ui-dialog");d.tabs=a('<div class="minibrowser-tabctrl"><ul class="minibrowser-tabs"><li id="minibrowser-rsrchtab"><a href="#minibrowser-rsrchpnl"><span class="minibrowser-icon-tab"/>Research</a></li><li id="minibrowser-trnslttab"><a href="#minibrowser-trnsltpnl"><span class="minibrowser-icon-tab"/>Translate</a></li><li id="minibrowser-thsrstab"><a href="#minibrowser-thsrspnl"><span class="minibrowser-icon-tab"/>Thesaurus</a></li></ul><div id="minibrowser-panels"><div id="minibrowser-rsrchpnl"></div><div id="minibrowser-trnsltpnl"></div><div id="minibrowser-thsrspnl"></div></div></div>').tabs().appendTo(d.dialog);
d.panels=d.tabs.find("#minibrowser-panels");d.researchpanel=d.tabs.find("#minibrowser-rsrchpnl").researchpanel();d.translatepanel=d.tabs.find("#minibrowser-trnsltpnl").translatepanel();d.thesauruspanel=d.tabs.find("#minibrowser-thsrspnl").thesauruspanel();d.infobar=d.dialogwrapper.find(".v-ui-dialog-buttonpane").removeClass("ui-dialog-buttonpane").addClass("minibrowser-infobar").html('<div class="minibrowser-infobar-text"><a href="'+f+'" target="_blank">help</a> | <a href="'+h+'" target="_blank">privacy</a><div><div class="minibrowser-infobar-logo"/>');
d.dialog.bind("dialogresize",function(){e._resizePanelContent(d)});d.dialog.bind("dialogopen",function(){setTimeout(function(){e._resizePanelContent(d)},201)});e._refresh()},_setOption:function(e,c){var d=this._data;switch(e){case "query":d.query=c,this._refresh()}a.Widget.prototype._setOption.apply(this,arguments)},_refresh:function(){var a=this._data,c=this._dom;null!=a.query&&(c.researchpanel.researchpanel("fetchdata",a.query),c.translatepanel.translatepanel("fetchdata",a.query),c.thesauruspanel.thesauruspanel("fetchdata",
a.query))},_resizePanelContent:function(a){var c=a.panels.offset().top,d=a.infobar.offset().top;a.panels.height(d-c-3)},destroy:function(){var e=this._dom;a(this.element).removeClass("minibrowser");e.researchpanel.researchpanel("destroy");e.translatepanel.translatepanel("destroy");e.thesauruspanel.translatepanel("destroy");e.tabs.tabs("destroy");e.tabs.remove();a.Widget.prototype.destroy.call(this)},show:function(a){var c=this._dom;c.dialog.dialog("open");null!=a&&(c.dialog.dialog("option","title",
a),this._setOption("query",a))},hide:function(){this._dom.dialog.dialog("close")},isOpen:function(){return this._dom.dialog.dialog("isOpen")},getWrapper:function(){return this._dom.dialogwrapper}})})(vitruvian.$,vitruvian.res.URL_PRIVACYPOLICY,vitruvian.res.URL_SUPPORT);(function(a,h,f,e,c){h("MiniBrowser","Executing");var d=a("<div/>").appendTo("body").minibrowser(),b=d.minibrowser("getWrapper"),g=b.wrap('<div id="-min_"><div id="-ibr_"><div id="-ows_"><div id="-er_"></div></div></div></div>').closest("#-er_"),l=a('<a href="#" id="minibrowser-tt" style="display: none;"></a>').appendTo(g),k=a('a[href="#minibrowser-rsrchpnl"]'),p=a('a[href="#minibrowser-trnsltpnl"]'),m=a('a[href="#minibrowser-thsrspnl"]'),n=a("#-er_"),r="",q={setmouseup:function(){q.mouseup=1},setmousedown:function(){q.mousedown=
1},testmouseup:function(){var a=q.mouseup;q.mouseup=0;return a},testmousedown:function(){var a=q.mousedown;q.mousedown=0;return a}};a(document).mousedown(function(b){q.testmousedown()||1!==b.which||(a.clearSelectedText(),l.stop(!0,!0).fadeOut("fast"),d.minibrowser("isOpen")&&d.minibrowser("hide"))});a(document).mouseup(function(b){q.testmouseup()||1!==b.which||setTimeout(function(){r=a.getSelectedText();r.length&&(l.stop(!0,!0).fadeIn("fast"),l.position({my:"left bottom",of:b,at:"right top",offset:"5 -5",
collision:"fit"}),c("Widget Actions",f))},0)});a(document).keyup(function(b){a.getSelectedText()!=r&&(l.stop(!0,!0).fadeOut("fast"),d.minibrowser("isOpen")&&d.minibrowser("hide"))});l.mouseup(function(a){1===a.which&&(d.minibrowser("isOpen")||(d.minibrowser("show",r),c("Widget Actions",e)),l.stop(!0,!0).fadeOut("fast"))});l.click(function(a){a.preventDefault();a.stopPropagation()});k.click(function(a){a.preventDefault();a.stopPropagation()});p.click(function(a){a.preventDefault();a.stopPropagation()});
m.click(function(a){a.preventDefault();a.stopPropagation()});n.click(function(a){a.stopPropagation()});l.mouseup(q.setmouseup);l.mousedown(q.setmousedown);b.mouseup(q.setmouseup);b.mousedown(q.setmousedown);d.bind("dialogopen",function(){a.hideFlashObjects()});d.bind("dialogclose",function(){a.showFlashObjects()});h("MiniBrowser","Execution Complete");(function(b){Element.prototype.addEventListener=function(c,d,e){return a(this).is(l)||a(this).is(k)||a(this).is(p)||a(this).is(m)||a(this).is(n)?!1:
b.apply(this,arguments)}})(Element.prototype.addEventListener)})(vitruvian.$,vitruvian.log,vitruvian.res.WIDGETS.MINIBROWSER_GAEVENT_SHOWBALLOON,vitruvian.res.WIDGETS.MINIBROWSER_GAEVENT_SHOWDIALOG,vitruvian.trackEvent);
